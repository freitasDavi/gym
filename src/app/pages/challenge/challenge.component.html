<div class="h-full flex flex-col">
  <!-- Header Section -->
  <div class="border-b border-base-300 bg-base-200/50 backdrop-blur-sm">
    <div class="container mx-auto px-6 py-4">
      <div class="flex flex-col gap-2">
        <h1 class="text-2xl font-bold text-primary">Desafio Semanal</h1>
        <p class="text-base-content/70">
          Meta: 6 idas Ã  academia e 3 caminhadas por semana
        </p>

        <!-- Progress Overview -->
        <div
          class="stats stats-vertical sm:stats-horizontal shadow bg-base-200 w-full sm:w-auto"
        >
          <div class="stat">
            <div class="stat-title">Academia</div>
            <div class="stat-value text-primary">
              <!-- / 6 restantes -->
              {{ currentChallenge?.gymCount }}/6
            </div>
            <div class="stat-desc">
              <!-- 6 - restantes -->
              {{ 6 - (currentChallenge?.gymCount || 0) }} restantes
            </div>
          </div>

          <div class="stat">
            <div class="stat-title">Caminhadas</div>
            <div class="stat-value text-primary">
              <!-- 1 / 3 -->
              {{ currentChallenge?.walkCount }}/3
            </div>
            <div class="stat-desc">
              {{ 3 - (currentChallenge?.walkCount || 0) }} restantes
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Daily Progress -->
  <div class="flex-1 overflow-auto py-6">
    <div class="container mx-auto px-6">
      <div class="grid gap-4">
        @if (currentChallenge == null) {
        <p>Carregando...</p>
        } @else { @for (day of currentChallenge.activities; track day.date) {
        <div
          class="card bg-base-200 shadow-sm"
          [class.border-2]="isToday(day.date)"
          [class.border-primary]="isToday(day.date)"
        >
          <div class="card-body">
            <div class="flex items-center justify-between">
              <div>
                <h3 class="font-medium capitalize">
                  {{ getDayName(day.date) }}
                </h3>
                <p class="text-sm text-base-content/70">
                  {{ formatDate(day.date) }}
                </p>
              </div>

              <div class="flex gap-4">
                <!-- Gym Toggle -->
                <button
                  class="btn"
                  [class.btn-primary]="day.gym"
                  [class.btn-ghost]="!day.gym"
                  (click)="toggleGym(day, 'gym')"
                >
                  <i-lucide
                    [img]="dumbell"
                    [class.text-primary-content]="day.gym"
                    [class.text-base-content]="!day.gym"
                  ></i-lucide>
                  Academia
                </button>

                <!-- Walk Toggle -->
                <button
                  class="btn"
                  [class.btn-primary]="day.walk"
                  [class.btn-ghost]="!day.walk"
                  (click)="toggleGym(day, 'walk')"
                >
                  <i-lucide
                    [img]="walking"
                    [class.text-primary-content]="day.walk"
                    [class.text-base-content]="!day.walk"
                  ></i-lucide>
                  {{ currentChallenge.activityName }}
                </button>
              </div>
            </div>
          </div>
        </div>
        } }
      </div>
    </div>
  </div>
</div>
